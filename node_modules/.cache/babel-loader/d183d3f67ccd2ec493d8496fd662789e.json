{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\John Byrne\\\\projects\\\\petful\\\\DSA-Petful\\\\petful-client-template\\\\src\\\\Components\\\\AdoptPage.js\";\nimport React, { Component } from 'react';\nimport AppContext from '../context';\nimport PetCard from './PetCard';\nimport AdoptLine from './AdoptLine';\nimport PeopleService from '../services/people-service';\nimport DogService from '../services/dog-service';\nimport CatService from '../services/cat-service';\nimport Queue from '../services/queue';\nimport Congratulations from './Congratulations';\nimport './AdoptPage.css';\n\nclass AdoptPage extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.cyclePeople = () => {\n      if (this.context.person !== this.context.queue.first.value) {\n        let odds = Math.floor(Math.random() * 100);\n\n        if (odds < 50) {\n          this.handleDogClick();\n        } else {\n          this.handleCatClick();\n        }\n      }\n    };\n\n    this.handleDogClick = () => {\n      return DogService.deleteDog().then(res => {\n        let owner = this.context.queue.dequeue();\n        res.owner = owner;\n        this.context.setAdopted(res);\n      }).then(res => {\n        DogService.getDog().then(res => this.context.setCurrDog(res));\n        this.setState({\n          nowAdopting: this.context.queue.first.value\n        });\n      });\n    };\n\n    this.handleCatClick = () => {\n      return CatService.deleteCat().then(res => {\n        let owner = this.context.queue.dequeue();\n        res.owner = owner;\n        this.context.setAdopted(res);\n      }).then(res => {\n        CatService.getCat().then(res => this.context.setCurrCat(res));\n        this.setState({\n          nowAdopting: this.context.queue.first.value\n        });\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.context.clearCurrDog();\n    this.context.clearCurrCat();\n    this.context.clearError();\n    this.context.clearQueue();\n    this.interval = setInterval(this.cyclePeople.bind(this), 1500);\n    Promise.all([CatService.getCat(), DogService.getDog(), PeopleService.getPeople()]).then(res => {\n      this.context.setCurrDog(res[0]);\n      this.context.setCurrCat(res[0]);\n      let peopleQueue = new Queue();\n      res[2].forEach(person => peopleQueue.enqueue(person));\n      this.context.setQueue(peopleQueue);\n    }).catch(error => console.error(error));\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.interval);\n  }\n\n  renderQueue() {\n    return React.createElement(AdoptLine, {\n      queue: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    });\n  }\n\n  renderDog() {\n    return React.createElement(PetCard, {\n      pet: this.context.currDog,\n      petType: 'dog',\n      handleAdoptClick: this.handleDogClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    });\n  }\n\n  renderCat() {\n    return React.createElement(PetCard, {\n      pet: this.context.currCat,\n      petType: 'cat',\n      handleAdoptClick: this.handleCatClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    });\n  }\n\n  render() {\n    const petAdopted = this.context.adopted.map((pet, index) => React.createElement(\"div\", {\n      className: \"congrats\",\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(Congratulations, {\n      imgSrc: pet.imageURL,\n      name: pet.name,\n      owner: pet.owner,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    })));\n    return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      className: \"adopt-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, \"Choose Your Next Best Friend!\")), React.createElement(\"div\", {\n      className: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"next-pet\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"Puppies\"), this.renderDog()), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"next-pet\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \"Kitties\"), this.renderCat())), this.context.queue.first.next ? this.renderQueue() : 'Loading...', React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }), React.createElement(\"h2\", {\n      className: \"congrats\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \"Congrats on Your New Bestie!\"), petAdopted));\n  }\n\n}\n\nAdoptPage.contextType = AppContext;\nexport default AdoptPage;","map":{"version":3,"sources":["C:/Users/John Byrne/projects/petful/DSA-Petful/petful-client-template/src/Components/AdoptPage.js"],"names":["React","Component","AppContext","PetCard","AdoptLine","PeopleService","DogService","CatService","Queue","Congratulations","AdoptPage","cyclePeople","context","person","queue","first","value","odds","Math","floor","random","handleDogClick","handleCatClick","deleteDog","then","res","owner","dequeue","setAdopted","getDog","setCurrDog","setState","nowAdopting","deleteCat","getCat","setCurrCat","componentDidMount","clearCurrDog","clearCurrCat","clearError","clearQueue","interval","setInterval","bind","Promise","all","getPeople","peopleQueue","forEach","enqueue","setQueue","catch","error","console","componentWillUnmount","clearInterval","renderQueue","renderDog","currDog","renderCat","currCat","render","petAdopted","adopted","map","pet","index","imageURL","name","next","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport AppContext from '../context'\r\nimport PetCard from './PetCard'\r\nimport AdoptLine from './AdoptLine'\r\nimport PeopleService from '../services/people-service'\r\nimport DogService from '../services/dog-service'\r\nimport CatService from '../services/cat-service'\r\nimport Queue from '../services/queue'\r\nimport Congratulations from './Congratulations'\r\nimport './AdoptPage.css'\r\n\r\nclass AdoptPage extends Component {\r\n  static contextType = AppContext\r\n\r\n  componentDidMount() {\r\n    this.context.clearCurrDog()\r\n    this.context.clearCurrCat()\r\n    this.context.clearError()\r\n    this.context.clearQueue()\r\n\r\n    this.interval = setInterval(this.cyclePeople.bind(this), 1500)\r\n    Promise.all([\r\n      CatService.getCat(),\r\n      DogService.getDog(),\r\n      PeopleService.getPeople(),\r\n    ])\r\n      .then((res) => {\r\n        this.context.setCurrDog(res[0])\r\n        this.context.setCurrCat(res[0])\r\n        let peopleQueue = new Queue()\r\n        res[2].forEach((person) => peopleQueue.enqueue(person))\r\n        this.context.setQueue(peopleQueue)\r\n      })\r\n      .catch((error) => console.error(error))\r\n  }\r\n  cyclePeople = () => {\r\n    if (this.context.person !== this.context.queue.first.value) {\r\n      let odds = Math.floor(Math.random() * 100)\r\n      if (odds < 50) {\r\n        this.handleDogClick()\r\n      } else {\r\n        this.handleCatClick()\r\n      }\r\n    }\r\n  }\r\n  componentWillUnmount() {\r\n    clearInterval(this.interval)\r\n  }\r\n\r\n  renderQueue() {\r\n    return (\r\n      <AdoptLine\r\n        queue\r\n      />\r\n    )\r\n  }\r\n\r\n  handleDogClick = () => {\r\n    return DogService.deleteDog()\r\n      .then(res => {\r\n        let owner = this.context.queue.dequeue()\r\n        res.owner = owner\r\n        this.context.setAdopted(res)\r\n      })\r\n      .then(res => {\r\n        DogService.getDog().then(res => this.context.setCurrDog(res))\r\n        this.setState({ nowAdopting: this.context.queue.first.value })\r\n      })\r\n  }\r\n\r\n  handleCatClick = () => {\r\n    return CatService.deleteCat()\r\n      .then(res => {\r\n        let owner = this.context.queue.dequeue()\r\n        res.owner = owner\r\n        this.context.setAdopted(res)\r\n      })\r\n      .then(res => {\r\n        CatService.getCat().then(res => this.context.setCurrCat(res))\r\n        this.setState({ nowAdopting: this.context.queue.first.value })\r\n      })\r\n  }\r\n\r\n  renderDog() {\r\n    return (\r\n      <PetCard\r\n        pet={this.context.currDog}\r\n        petType={'dog'}\r\n        handleAdoptClick={this.handleDogClick}\r\n      />\r\n    )\r\n  }\r\n\r\n  renderCat() {\r\n    return (\r\n      <PetCard\r\n        pet={this.context.currCat}\r\n        petType={'cat'}\r\n        handleAdoptClick={this.handleCatClick}\r\n      />\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const petAdopted = this.context.adopted.map((pet, index) => (\r\n      <div className='congrats' key={index}>\r\n        <Congratulations\r\n        imgSrc={pet.imageURL}\r\n        name={pet.name}\r\n        owner={pet.owner}\r\n        />\r\n      </div>\r\n    ))\r\n    return (\r\n      <>\r\n        <div className='adopt-header'>\r\n          <h1>Choose Your Next Best Friend!</h1>\r\n        </div>\r\n        <div className='center'>\r\n          <div>\r\n            <h2 className='next-pet'>Puppies</h2>\r\n            {this.renderDog()}\r\n          </div>\r\n          <div>\r\n            <h2 className='next-pet'>Kitties</h2>\r\n            {this.renderCat()}\r\n          </div>\r\n        </div>\r\n        {this.context.queue.first.next ? this.renderQueue() : 'Loading...'}\r\n        <div>\r\n          <hr />\r\n          <h2 className='congrats'>Congrats on Your New Bestie!</h2>\r\n          {petAdopted}\r\n        </div>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nexport default AdoptPage"]},"metadata":{},"sourceType":"module"}