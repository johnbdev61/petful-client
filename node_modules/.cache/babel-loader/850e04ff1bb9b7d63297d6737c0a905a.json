{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\John Byrne\\\\projects\\\\petful\\\\DSA-Petful\\\\petful-client-template\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\John Byrne\\\\projects\\\\petful\\\\DSA-Petful\\\\petful-client-template\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\John Byrne\\\\projects\\\\petful\\\\DSA-Petful\\\\petful-client-template\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\John Byrne\\\\projects\\\\petful\\\\DSA-Petful\\\\petful-client-template\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\John Byrne\\\\projects\\\\petful\\\\DSA-Petful\\\\petful-client-template\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import AppContext from'../context';import PetCard from'./PetCard';import AdoptLine from'./AdoptLine';import PeopleService from'../services/people-service';import DogService from'../services/dog-service';import CatService from'../services/cat-service';import Queue from'../services/queue';import Congratulations from'./Congratulations';import'./AdoptPage.css';var AdoptPage=/*#__PURE__*/function(_Component){_inherits(AdoptPage,_Component);function AdoptPage(){var _getPrototypeOf2;var _this;_classCallCheck(this,AdoptPage);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(AdoptPage)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.cyclePeople=function(){if(_this.context.person!==_this.context.queue.first.value){var odds=Math.floor(Math.random()*100);if(odds<50){_this.handleDogClick();}else{_this.handleCatClick();}}};_this.handleDogClick=function(){return DogService.deleteDog().then(function(res){var owner=_this.context.queue.requeue();res.owner=owner;_this.context.setAdopted(res);}).then(function(res){DogService.getDog().then(function(res){return _this.context.setCurrDog(res);});_this.setState({nowAdopting:_this.context.queue.first.value});});};_this.handleCatClick=function(){return CatService.deleteCat().then(function(res){var owner=_this.context.queue.requeue();res.owner=owner;_this.context.setAdopted(res);}).then(function(res){CatService.getCat().then(function(res){return _this.context.setCurrCat(res);});_this.setState({nowAdopting:_this.context.queue.first.value});});};return _this;}_createClass(AdoptPage,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.context.clearCurrDog();this.context.clearCurrCat();this.context.clearError();this.context.clearQueue();this.interval=setInterval(this.cyclePeople.bind(this),1500);Promise.all([CatService.getCat(),DogService.getDog(),PeopleService.getPeople()]).then(function(res){_this2.context.setCurrDog(res[0]);_this2.context.setCurrCat(res[0]);var peopleQueue=new Queue();res[2].forEach(function(person){return peopleQueue.enqueue(person);});_this2.context.setQueue(peopleQueue);}).catch(function(error){return console.error(error);});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){clearInterval(this.interval);}},{key:\"renderQueue\",value:function renderQueue(){return React.createElement(AdoptLine,{first:this.context.queue.first.value,second:this.context.queue.first.next.value,third:this.context.queue.first.next.next.value});}},{key:\"renderDog\",value:function renderDog(){return React.createElement(PetCard,{pet:this.context.currDog,petType:'dog',handleAdoptClick:this.handleDogClick});}},{key:\"renderCat\",value:function renderCat(){return React.createElement(PetCard,{pet:this.context.currCat,petType:'cat',handleAdoptClick:this.handleCatClick});}},{key:\"render\",value:function render(){var petAdopted=this.context.adopted.map(function(pet,index){return React.createElement(\"div\",{className:\"congrats\",key:index},React.createElement(Congratulations,{imgSrc:pet.imageURL,name:pet.name,owner:pet.owner}));});return React.createElement(React.Fragment,null,React.createElement(\"div\",{className:\"adopt-header\"},React.createElement(\"h1\",null,\"Choose Your Next Best Friend!\")),React.createElement(\"div\",{className:\"center\"},React.createElement(\"div\",null,React.createElement(\"h2\",{className:\"next-pet\"},\"Puppies\"),this.renderDog()),React.createElement(\"div\",null,React.createElement(\"h2\",{className:\"next-pet\"},\"Kitties\"),this.renderCat())),this.context.queue.first.next?this.renderQueue():'Loading...',React.createElement(\"div\",null,React.createElement(\"hr\",null),React.createElement(\"h2\",{className:\"congrats\"},\"Congrats on Your New Bestie!\"),petAdopted));}}]);return AdoptPage;}(Component);AdoptPage.contextType=AppContext;export default AdoptPage;","map":{"version":3,"sources":["C:/Users/John Byrne/projects/petful/DSA-Petful/petful-client-template/src/Components/AdoptPage.js"],"names":["React","Component","AppContext","PetCard","AdoptLine","PeopleService","DogService","CatService","Queue","Congratulations","AdoptPage","cyclePeople","context","person","queue","first","value","odds","Math","floor","random","handleDogClick","handleCatClick","deleteDog","then","res","owner","requeue","setAdopted","getDog","setCurrDog","setState","nowAdopting","deleteCat","getCat","setCurrCat","clearCurrDog","clearCurrCat","clearError","clearQueue","interval","setInterval","bind","Promise","all","getPeople","peopleQueue","forEach","enqueue","setQueue","catch","error","console","clearInterval","next","currDog","currCat","petAdopted","adopted","map","pet","index","imageURL","name","renderDog","renderCat","renderQueue","contextType"],"mappings":"mzBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,UAAP,KAAuB,YAAvB,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CACA,MAAOC,CAAAA,aAAP,KAA0B,4BAA1B,CACA,MAAOC,CAAAA,UAAP,KAAuB,yBAAvB,CACA,MAAOC,CAAAA,UAAP,KAAuB,yBAAvB,CACA,MAAOC,CAAAA,KAAP,KAAkB,mBAAlB,CACA,MAAOC,CAAAA,eAAP,KAA4B,mBAA5B,CACA,MAAO,iBAAP,C,GAEMC,CAAAA,S,2YAwBJC,W,CAAc,UAAM,CAClB,GAAI,MAAKC,OAAL,CAAaC,MAAb,GAAwB,MAAKD,OAAL,CAAaE,KAAb,CAAmBC,KAAnB,CAAyBC,KAArD,CAA4D,CAC1D,GAAIC,CAAAA,IAAI,CAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,GAAgB,GAA3B,CAAX,CACA,GAAIH,IAAI,CAAG,EAAX,CAAe,CACb,MAAKI,cAAL,GACD,CAFD,IAEO,CACL,MAAKC,cAAL,GACD,CACF,CACF,C,OAeDD,c,CAAiB,UAAM,CACrB,MAAOf,CAAAA,UAAU,CAACiB,SAAX,GACJC,IADI,CACC,SAAAC,GAAG,CAAI,CACX,GAAIC,CAAAA,KAAK,CAAG,MAAKd,OAAL,CAAaE,KAAb,CAAmBa,OAAnB,EAAZ,CACAF,GAAG,CAACC,KAAJ,CAAYA,KAAZ,CACA,MAAKd,OAAL,CAAagB,UAAb,CAAwBH,GAAxB,EACD,CALI,EAMJD,IANI,CAMC,SAAAC,GAAG,CAAI,CACXnB,UAAU,CAACuB,MAAX,GAAoBL,IAApB,CAAyB,SAAAC,GAAG,QAAI,OAAKb,OAAL,CAAakB,UAAb,CAAwBL,GAAxB,CAAJ,EAA5B,EACA,MAAKM,QAAL,CAAc,CAAEC,WAAW,CAAE,MAAKpB,OAAL,CAAaE,KAAb,CAAmBC,KAAnB,CAAyBC,KAAxC,CAAd,EACD,CATI,CAAP,CAUD,C,OAEDM,c,CAAiB,UAAM,CACrB,MAAOf,CAAAA,UAAU,CAAC0B,SAAX,GACJT,IADI,CACC,SAAAC,GAAG,CAAI,CACX,GAAIC,CAAAA,KAAK,CAAG,MAAKd,OAAL,CAAaE,KAAb,CAAmBa,OAAnB,EAAZ,CACAF,GAAG,CAACC,KAAJ,CAAYA,KAAZ,CACA,MAAKd,OAAL,CAAagB,UAAb,CAAwBH,GAAxB,EACD,CALI,EAMJD,IANI,CAMC,SAAAC,GAAG,CAAI,CACXlB,UAAU,CAAC2B,MAAX,GAAoBV,IAApB,CAAyB,SAAAC,GAAG,QAAI,OAAKb,OAAL,CAAauB,UAAb,CAAwBV,GAAxB,CAAJ,EAA5B,EACA,MAAKM,QAAL,CAAc,CAAEC,WAAW,CAAE,MAAKpB,OAAL,CAAaE,KAAb,CAAmBC,KAAnB,CAAyBC,KAAxC,CAAd,EACD,CATI,CAAP,CAUD,C,kGArEmB,iBAClB,KAAKJ,OAAL,CAAawB,YAAb,GACA,KAAKxB,OAAL,CAAayB,YAAb,GACA,KAAKzB,OAAL,CAAa0B,UAAb,GACA,KAAK1B,OAAL,CAAa2B,UAAb,GAEA,KAAKC,QAAL,CAAgBC,WAAW,CAAC,KAAK9B,WAAL,CAAiB+B,IAAjB,CAAsB,IAAtB,CAAD,CAA8B,IAA9B,CAA3B,CACAC,OAAO,CAACC,GAAR,CAAY,CACVrC,UAAU,CAAC2B,MAAX,EADU,CAEV5B,UAAU,CAACuB,MAAX,EAFU,CAGVxB,aAAa,CAACwC,SAAd,EAHU,CAAZ,EAKGrB,IALH,CAKQ,SAACC,GAAD,CAAS,CACb,MAAI,CAACb,OAAL,CAAakB,UAAb,CAAwBL,GAAG,CAAC,CAAD,CAA3B,EACA,MAAI,CAACb,OAAL,CAAauB,UAAb,CAAwBV,GAAG,CAAC,CAAD,CAA3B,EACA,GAAIqB,CAAAA,WAAW,CAAG,GAAItC,CAAAA,KAAJ,EAAlB,CACAiB,GAAG,CAAC,CAAD,CAAH,CAAOsB,OAAP,CAAe,SAAClC,MAAD,QAAYiC,CAAAA,WAAW,CAACE,OAAZ,CAAoBnC,MAApB,CAAZ,EAAf,EACA,MAAI,CAACD,OAAL,CAAaqC,QAAb,CAAsBH,WAAtB,EACD,CAXH,EAYGI,KAZH,CAYS,SAACC,KAAD,QAAWC,CAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd,CAAX,EAZT,EAaD,C,mEAWsB,CACrBE,aAAa,CAAC,KAAKb,QAAN,CAAb,CACD,C,iDAEa,CACZ,MACE,qBAAC,SAAD,EACE,KAAK,CAAE,KAAK5B,OAAL,CAAaE,KAAb,CAAmBC,KAAnB,CAAyBC,KADlC,CAEE,MAAM,CAAE,KAAKJ,OAAL,CAAaE,KAAb,CAAmBC,KAAnB,CAAyBuC,IAAzB,CAA8BtC,KAFxC,CAGE,KAAK,CAAE,KAAKJ,OAAL,CAAaE,KAAb,CAAmBC,KAAnB,CAAyBuC,IAAzB,CAA8BA,IAA9B,CAAmCtC,KAH5C,EADF,CAOD,C,6CA4BW,CACV,MACE,qBAAC,OAAD,EACE,GAAG,CAAE,KAAKJ,OAAL,CAAa2C,OADpB,CAEE,OAAO,CAAE,KAFX,CAGE,gBAAgB,CAAE,KAAKlC,cAHzB,EADF,CAOD,C,6CAEW,CACV,MACE,qBAAC,OAAD,EACE,GAAG,CAAE,KAAKT,OAAL,CAAa4C,OADpB,CAEE,OAAO,CAAE,KAFX,CAGE,gBAAgB,CAAE,KAAKlC,cAHzB,EADF,CAOD,C,uCAEQ,CACP,GAAMmC,CAAAA,UAAU,CAAG,KAAK7C,OAAL,CAAa8C,OAAb,CAAqBC,GAArB,CAAyB,SAACC,GAAD,CAAMC,KAAN,QAC1C,4BAAK,SAAS,CAAC,UAAf,CAA0B,GAAG,CAAEA,KAA/B,EACE,oBAAC,eAAD,EACA,MAAM,CAAED,GAAG,CAACE,QADZ,CAEA,IAAI,CAAEF,GAAG,CAACG,IAFV,CAGA,KAAK,CAAEH,GAAG,CAAClC,KAHX,EADF,CAD0C,EAAzB,CAAnB,CASA,MACE,yCACE,2BAAK,SAAS,CAAC,cAAf,EACE,8DADF,CADF,CAIE,2BAAK,SAAS,CAAC,QAAf,EACE,+BACE,0BAAI,SAAS,CAAC,UAAd,YADF,CAEG,KAAKsC,SAAL,EAFH,CADF,CAKE,+BACE,0BAAI,SAAS,CAAC,UAAd,YADF,CAEG,KAAKC,SAAL,EAFH,CALF,CAJF,CAcG,KAAKrD,OAAL,CAAaE,KAAb,CAAmBC,KAAnB,CAAyBuC,IAAzB,CAAgC,KAAKY,WAAL,EAAhC,CAAqD,YAdxD,CAeE,+BACE,8BADF,CAEE,0BAAI,SAAS,CAAC,UAAd,iCAFF,CAGGT,UAHH,CAfF,CADF,CAuBD,C,uBA/HqBxD,S,EAAlBS,S,CACGyD,W,CAAcjE,U,CAiIvB,cAAeQ,CAAAA,SAAf","sourcesContent":["import React, { Component } from 'react'\r\nimport AppContext from '../context'\r\nimport PetCard from './PetCard'\r\nimport AdoptLine from './AdoptLine'\r\nimport PeopleService from '../services/people-service'\r\nimport DogService from '../services/dog-service'\r\nimport CatService from '../services/cat-service'\r\nimport Queue from '../services/queue'\r\nimport Congratulations from './Congratulations'\r\nimport './AdoptPage.css'\r\n\r\nclass AdoptPage extends Component {\r\n  static contextType = AppContext\r\n\r\n  componentDidMount() {\r\n    this.context.clearCurrDog()\r\n    this.context.clearCurrCat()\r\n    this.context.clearError()\r\n    this.context.clearQueue()\r\n\r\n    this.interval = setInterval(this.cyclePeople.bind(this), 1500)\r\n    Promise.all([\r\n      CatService.getCat(),\r\n      DogService.getDog(),\r\n      PeopleService.getPeople(),\r\n    ])\r\n      .then((res) => {\r\n        this.context.setCurrDog(res[0])\r\n        this.context.setCurrCat(res[0])\r\n        let peopleQueue = new Queue()\r\n        res[2].forEach((person) => peopleQueue.enqueue(person))\r\n        this.context.setQueue(peopleQueue)\r\n      })\r\n      .catch((error) => console.error(error))\r\n  }\r\n  cyclePeople = () => {\r\n    if (this.context.person !== this.context.queue.first.value) {\r\n      let odds = Math.floor(Math.random() * 100)\r\n      if (odds < 50) {\r\n        this.handleDogClick()\r\n      } else {\r\n        this.handleCatClick()\r\n      }\r\n    }\r\n  }\r\n  componentWillUnmount() {\r\n    clearInterval(this.interval)\r\n  }\r\n\r\n  renderQueue() {\r\n    return (\r\n      <AdoptLine\r\n        first={this.context.queue.first.value}\r\n        second={this.context.queue.first.next.value}\r\n        third={this.context.queue.first.next.next.value}\r\n      />\r\n    )\r\n  }\r\n\r\n  handleDogClick = () => {\r\n    return DogService.deleteDog()\r\n      .then(res => {\r\n        let owner = this.context.queue.requeue()\r\n        res.owner = owner\r\n        this.context.setAdopted(res)\r\n      })\r\n      .then(res => {\r\n        DogService.getDog().then(res => this.context.setCurrDog(res))\r\n        this.setState({ nowAdopting: this.context.queue.first.value })\r\n      })\r\n  }\r\n\r\n  handleCatClick = () => {\r\n    return CatService.deleteCat()\r\n      .then(res => {\r\n        let owner = this.context.queue.requeue()\r\n        res.owner = owner\r\n        this.context.setAdopted(res)\r\n      })\r\n      .then(res => {\r\n        CatService.getCat().then(res => this.context.setCurrCat(res))\r\n        this.setState({ nowAdopting: this.context.queue.first.value })\r\n      })\r\n  }\r\n\r\n  renderDog() {\r\n    return (\r\n      <PetCard\r\n        pet={this.context.currDog}\r\n        petType={'dog'}\r\n        handleAdoptClick={this.handleDogClick}\r\n      />\r\n    )\r\n  }\r\n\r\n  renderCat() {\r\n    return (\r\n      <PetCard\r\n        pet={this.context.currCat}\r\n        petType={'cat'}\r\n        handleAdoptClick={this.handleCatClick}\r\n      />\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const petAdopted = this.context.adopted.map((pet, index) => (\r\n      <div className='congrats' key={index}>\r\n        <Congratulations\r\n        imgSrc={pet.imageURL}\r\n        name={pet.name}\r\n        owner={pet.owner}\r\n        />\r\n      </div>\r\n    ))\r\n    return (\r\n      <>\r\n        <div className='adopt-header'>\r\n          <h1>Choose Your Next Best Friend!</h1>\r\n        </div>\r\n        <div className='center'>\r\n          <div>\r\n            <h2 className='next-pet'>Puppies</h2>\r\n            {this.renderDog()}\r\n          </div>\r\n          <div>\r\n            <h2 className='next-pet'>Kitties</h2>\r\n            {this.renderCat()}\r\n          </div>\r\n        </div>\r\n        {this.context.queue.first.next ? this.renderQueue() : 'Loading...'}\r\n        <div>\r\n          <hr />\r\n          <h2 className='congrats'>Congrats on Your New Bestie!</h2>\r\n          {petAdopted}\r\n        </div>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nexport default AdoptPage"]},"metadata":{},"sourceType":"module"}