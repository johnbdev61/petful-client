{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\John Byrne\\\\projects\\\\petful\\\\DSA-Petful\\\\petful-client-template\\\\src\\\\Components\\\\PetLine.js\";\nimport React from 'react';\nimport peopleService from '../services/people-service';\nimport petsService from '../services/pets-service';\nexport default class Adopt extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.updatePets = () => {\n      return petsService.getPets().then(res => {\n        this.setState({\n          dog: res.dog,\n          cat: res.cat\n        });\n      });\n    };\n\n    this.updatePeople = () => {\n      peopleService.getPeople().then(res => {\n        let peopleArr = res.filter(person => person !== null);\n        this.setState({\n          people: [...peopleArr]\n        });\n      });\n    };\n\n    this.adoptCat = () => {\n      petsService.adopt('cat').then(() => {\n        this.setState(prevState => ({\n          people: prevState.people.slice(1)\n        }));\n        this.setState({\n          name: null\n        });\n        this.setState({\n          adopted: 'Meow! You adopted a cat :)'\n        });\n        this.setState({\n          inLine: false\n        });\n      });\n      this.updatePeople();\n      this.updatePets();\n    };\n\n    this.adoptDog = () => {\n      petsService.adopt('dog').then(() => {\n        this.setState(prevState => ({\n          people: prevState.people.slice(1)\n        }));\n        this.setState({\n          name: null\n        });\n        this.setState({\n          adopted: 'Woof! You adopted a dog :)'\n        });\n        this.setState({\n          inLine: false\n        });\n      });\n      this.updatePeople();\n      this.updatePets();\n    };\n\n    this.peopleString = () => {\n      let result = '';\n\n      if (this.state.people) {\n        for (let i = 0; i < this.state.people.length; i++) {\n          if (i === this.state.people.length - 1 && this.state.people.length !== 1) {\n            result = result + 'and ' + this.state.people[i];\n            break;\n          }\n\n          result = result + this.state.people[i] + ', ';\n        }\n      }\n\n      return result;\n    };\n\n    this.serveACustomer = () => {\n      if (!this.state.error) {\n        if (this.state.people && this.state.people[0] !== this.state.name) {\n          if (this.state.people && this.state.people.length > 1) {\n            let die = Math.floor(Math.random() * 2) + 1;\n            let type = 'cat';\n\n            if (die === 2) {\n              type = 'dog';\n            }\n\n            petsService.adopt(type).then(() => {\n              this.setState(prevState => ({\n                people: prevState.people.slice(1)\n              }));\n            }).then(() => {\n              this.updatePets();\n            }).catch(e => this.setState({\n              error: e.message\n            }));\n          }\n        }\n\n        if (this.state.people && this.state.people.length < 5) {\n          let people = ['Dana', 'Samantha Power', 'Alister Crowley', 'Max Michaels'];\n          let person = people[this.state.count % people.length];\n          peopleService.addPerson(person).then(res => {\n            this.setState(prevState => ({\n              people: [...prevState.people, person]\n            }));\n            this.setState(prevState => ({\n              count: prevState.count + 1\n            }));\n          });\n        }\n      }\n    };\n\n    this.getInLine = e => {\n      e.preventDefault();\n\n      if (!this.state.inLine) {\n        const {\n          name\n        } = e.target;\n        e.target.value = '';\n        this.setState({\n          name: name.value,\n          inLine: true\n        }).then(() => {\n          peopleService.addPerson(name.value);\n          this.updatePeople();\n        });\n      } else {\n        this.setState({\n          message: 'You are already in line!'\n        });\n      }\n    };\n\n    this.state = {\n      dog: {\n        age: 3,\n        breed: 'Golden Retriever',\n        description: 'A smiling golden-brown golden retreiver listening to music.',\n        gender: 'Male',\n        imageURL: 'https://images.pexels.com/photos/33053/dog-young-dog-small-dog-maltese.jpg?auto=compress&cs=tinysrgb&dpr=1&w=500',\n        name: 'Zim',\n        story: 'Owner Passed away'\n      },\n      cat: {\n        age: 3,\n        breed: 'Tabby',\n        description: 'boxer dog',\n        gender: 'Male',\n        imageURL: 'https://images.pexels.com/photos/1472999/pexels-photo-1472999.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500',\n        name: 'Vince the Pince',\n        story: 'Found in neighborhood'\n      },\n      people: null,\n      error: null,\n      autoAdopt: true,\n      count: 0,\n      adopted: null,\n      name: null,\n      inLine: false,\n      message: null\n    };\n  }\n\n  componentDidMount() {\n    this.updatePets();\n    this.updatePeople();\n    setInterval(this.serveACustomer, 10000, 0);\n  }\n\n  render() {\n    if (this.state.people && this.state.people[0] !== this.state.name) {\n      return React.createElement(\"section\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, this.state.message), React.createElement(\"form\", {\n        onSubmit: this.getInLine,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, \"Your name:\"), React.createElement(\"input\", {\n        type: \"text\",\n        id: \"name\",\n        name: \"name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"submit\",\n        value: \"Get In Line\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      })), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, this.state.adopted), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, \"The current queue is: \", this.peopleString(), \". The pets up for adoption are:\"), ' ', React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"petDisplay\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, \"First we have \", this.state.cat.name, \" a \", this.state.cat.age, \" year old \", this.state.cat.gender, \" \", this.state.cat.breed, \" whose story is \\\"\", this.state.cat.story, \"\\\"\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }), React.createElement(\"img\", {\n        src: this.state.cat.imageURL,\n        alt: this.state.cat.description,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"petDisplay\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, ' ', \"And next is \", this.state.dog.name, \" a \", this.state.cat.age, \" year old\", ' ', this.state.dog.gender, \" \", this.state.dog.breed, \" whose story is \\\"\", this.state.dog.story, \"\\\"\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }), React.createElement(\"img\", {\n        src: this.state.dog.imageURL,\n        alt: this.state.dog.description,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      })));\n    } else {\n      return React.createElement(\"section\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, this.state.adopted), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, \"The current queue is: \", this.peopleString(), \". The pets up for adoption are:\"), ' ', React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        onClick: this.adoptCat,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, \"Adopt the cat \", this.state.cat.name, \"!\"), React.createElement(\"button\", {\n        onClick: this.adoptDog,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, \"Adopt the dog \", this.state.dog.name, \"!\"), React.createElement(\"div\", {\n        className: \"petDisplay\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, \"First we have \", this.state.cat.name, \" a \", this.state.cat.age, \" year old \", this.state.cat.gender, \" \", this.state.cat.breed, \" whose story is \\\"\", this.state.cat.story, \"\\\"\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }), React.createElement(\"img\", {\n        src: this.state.cat.imageURL,\n        alt: this.state.cat.description,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"petDisplay\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, ' ', \"And next is \", this.state.dog.name, \" a \", this.state.cat.age, \" year old\", ' ', this.state.dog.gender, \" \", this.state.dog.breed, \" whose story is \\\"\", this.state.dog.story, \"\\\"\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }), React.createElement(\"img\", {\n        src: this.state.dog.imageURL,\n        alt: this.state.dog.description,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      })));\n    }\n  }\n\n}","map":{"version":3,"sources":["C:/Users/John Byrne/projects/petful/DSA-Petful/petful-client-template/src/Components/PetLine.js"],"names":["React","peopleService","petsService","Adopt","Component","constructor","props","updatePets","getPets","then","res","setState","dog","cat","updatePeople","getPeople","peopleArr","filter","person","people","adoptCat","adopt","prevState","slice","name","adopted","inLine","adoptDog","peopleString","result","state","i","length","serveACustomer","error","die","Math","floor","random","type","catch","e","message","count","addPerson","getInLine","preventDefault","target","value","age","breed","description","gender","imageURL","story","autoAdopt","componentDidMount","setInterval","render"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport peopleService from '../services/people-service'\r\nimport petsService from '../services/pets-service'\r\n\r\nexport default class Adopt extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      dog: {\r\n        age: 3,\r\n        breed: 'Golden Retriever',\r\n        description:\r\n          'A smiling golden-brown golden retreiver listening to music.',\r\n        gender: 'Male',\r\n        imageURL:\r\n          'https://images.pexels.com/photos/33053/dog-young-dog-small-dog-maltese.jpg?auto=compress&cs=tinysrgb&dpr=1&w=500',\r\n        name: 'Zim',\r\n        story: 'Owner Passed away',\r\n      },\r\n      cat: {\r\n        age: 3,\r\n        breed: 'Tabby',\r\n        description: 'boxer dog',\r\n        gender: 'Male',\r\n        imageURL:\r\n          'https://images.pexels.com/photos/1472999/pexels-photo-1472999.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500',\r\n        name: 'Vince the Pince',\r\n        story: 'Found in neighborhood',\r\n      },\r\n      people: null,\r\n      error: null,\r\n      autoAdopt: true,\r\n      count: 0,\r\n      adopted: null,\r\n      name: null,\r\n      inLine: false,\r\n      message: null,\r\n    }\r\n  }\r\n\r\n  updatePets = () => {\r\n    return petsService.getPets().then((res) => {\r\n      this.setState({ dog: res.dog, cat: res.cat })\r\n    })\r\n  }\r\n\r\n  updatePeople = () => {\r\n    peopleService.getPeople().then((res) => {\r\n      let peopleArr = res.filter((person) => person !== null)\r\n      this.setState({ people: [...peopleArr] })\r\n    })\r\n  }\r\n\r\n  adoptCat = () => {\r\n    petsService.adopt('cat').then(() => {\r\n      this.setState((prevState) => ({\r\n        people: prevState.people.slice(1),\r\n      }))\r\n      this.setState({ name: null })\r\n      this.setState({ adopted: 'Meow! You adopted a cat :)' })\r\n      this.setState({ inLine: false })\r\n    })\r\n    this.updatePeople()\r\n    this.updatePets()\r\n  }\r\n\r\n  adoptDog = () => {\r\n    petsService.adopt('dog').then(() => {\r\n      this.setState((prevState) => ({\r\n        people: prevState.people.slice(1),\r\n      }))\r\n      this.setState({ name: null })\r\n      this.setState({ adopted: 'Woof! You adopted a dog :)' })\r\n      this.setState({ inLine: false })\r\n    })\r\n    this.updatePeople()\r\n    this.updatePets()\r\n  }\r\n\r\n  peopleString = () => {\r\n    let result = ''\r\n    if (this.state.people) {\r\n      for (let i = 0; i < this.state.people.length; i++) {\r\n        if (\r\n          i === this.state.people.length - 1 &&\r\n          this.state.people.length !== 1\r\n        ) {\r\n          result = result + 'and ' + this.state.people[i]\r\n          break\r\n        }\r\n        result = result + this.state.people[i] + ', '\r\n      }\r\n    }\r\n    return result\r\n  }\r\n\r\n  serveACustomer = () => {\r\n    if (!this.state.error) {\r\n      if (this.state.people && this.state.people[0] !== this.state.name) {\r\n        if (this.state.people && this.state.people.length > 1) {\r\n          let die = Math.floor(Math.random() * 2) + 1\r\n          let type = 'cat'\r\n          if (die === 2) {\r\n            type = 'dog'\r\n          }\r\n          petsService\r\n            .adopt(type)\r\n            .then(() => {\r\n              this.setState((prevState) => ({\r\n                people: prevState.people.slice(1),\r\n              }))\r\n            })\r\n            .then(() => {\r\n              this.updatePets()\r\n            })\r\n            .catch((e) => this.setState({ error: e.message }))\r\n        }\r\n      }\r\n      if (this.state.people && this.state.people.length < 5) {\r\n        let people = [\r\n          'Dana',\r\n          'Samantha Power',\r\n          'Alister Crowley',\r\n          'Max Michaels',\r\n        ]\r\n        let person = people[this.state.count % people.length]\r\n\r\n        peopleService.addPerson(person).then((res) => {\r\n          this.setState((prevState) => ({\r\n            people: [...prevState.people, person],\r\n          }))\r\n\r\n          this.setState((prevState) => ({ count: prevState.count + 1 }))\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  getInLine = (e) => {\r\n    e.preventDefault()\r\n    if (!this.state.inLine) {\r\n      const { name } = e.target\r\n      e.target.value = ''\r\n      this.setState({ name: name.value, inLine: true }).then(() => {\r\n        peopleService.addPerson(name.value)\r\n        this.updatePeople()\r\n      })\r\n    } else {\r\n      this.setState({ message: 'You are already in line!' })\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.updatePets()\r\n    this.updatePeople()\r\n    setInterval(this.serveACustomer, 10000, 0)\r\n  }\r\n\r\n  render() {\r\n    if (this.state.people && this.state.people[0] !== this.state.name) {\r\n      return (\r\n        <section>\r\n          <p>{this.state.message}</p>\r\n          <form onSubmit={this.getInLine}>\r\n            <label htmlFor='name'>Your name:</label>\r\n            <input type='text' id='name' name='name' />\r\n            <input type='submit' value='Get In Line' />\r\n          </form>\r\n          <p>{this.state.adopted}</p>\r\n          <p>\r\n            The current queue is: {this.peopleString()}. The pets up for\r\n            adoption are:\r\n          </p>{' '}\r\n          <br />\r\n          <div className='petDisplay'>\r\n            <p>\r\n              First we have {this.state.cat.name} a {this.state.cat.age} year\r\n              old {this.state.cat.gender} {this.state.cat.breed} whose story is\r\n              \"{this.state.cat.story}\"\r\n            </p>\r\n            <br />\r\n            <img\r\n              src={this.state.cat.imageURL}\r\n              alt={this.state.cat.description}\r\n            />\r\n            <br />\r\n          </div>\r\n          <div className='petDisplay'>\r\n            <p>\r\n              {' '}\r\n              And next is {this.state.dog.name} a {this.state.cat.age} year old{' '}\r\n              {this.state.dog.gender} {this.state.dog.breed} whose story is \"\r\n              {this.state.dog.story}\"\r\n            </p>\r\n            <br />\r\n            <img\r\n              src={this.state.dog.imageURL}\r\n              alt={this.state.dog.description}\r\n            />\r\n            <br />\r\n          </div>\r\n        </section>\r\n      )\r\n    } else {\r\n      return (\r\n        <section>\r\n          <p>{this.state.adopted}</p>\r\n          <p>\r\n            The current queue is: {this.peopleString()}. The pets up for\r\n            adoption are:\r\n          </p>{' '}\r\n          <br />\r\n          <button onClick={this.adoptCat}>\r\n            Adopt the cat {this.state.cat.name}!\r\n          </button>\r\n          <button onClick={this.adoptDog}>\r\n            Adopt the dog {this.state.dog.name}!\r\n          </button>\r\n          <div className='petDisplay'>\r\n            <p>\r\n              First we have {this.state.cat.name} a {this.state.cat.age} year\r\n              old {this.state.cat.gender} {this.state.cat.breed} whose story is\r\n              \"{this.state.cat.story}\"\r\n            </p>\r\n            <br />\r\n            <img\r\n              src={this.state.cat.imageURL}\r\n              alt={this.state.cat.description}\r\n            />\r\n            <br />\r\n          </div>\r\n          <div className='petDisplay'>\r\n            <p>\r\n              {' '}\r\n              And next is {this.state.dog.name} a {this.state.cat.age} year old{' '}\r\n              {this.state.dog.gender} {this.state.dog.breed} whose story is \"\r\n              {this.state.dog.story}\"\r\n            </p>\r\n            <br />\r\n            <img\r\n              src={this.state.dog.imageURL}\r\n              alt={this.state.dog.description}\r\n            />\r\n            <br />\r\n          </div>\r\n        </section>\r\n      )\r\n    }\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}