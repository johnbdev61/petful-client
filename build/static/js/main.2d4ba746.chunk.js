(this["webpackJsonppetful-client"]=this["webpackJsonppetful-client"]||[]).push([[0],{23:function(e,t,n){e.exports=n(40)},24:function(e,t,n){},29:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);n(24);var r=n(0),a=n.n(r),o=n(20),c=n.n(o),u=n(12),s=n(22),i=n(3),l=n(4),h=n(6),p=n(5),d=n(7),f=a.a.createContext({currDog:{},currCat:{},queue:{first:{}},people:[],person:"",adopted:[],error:null,setCurrDog:function(){},clearCurrDog:function(){},setCurrCat:function(){},clearCurrCat:function(){},setQueue:function(){},clearQueue:function(){},setPeople:function(){},clearPeople:function(){},setPerson:function(){},clearPerson:function(){},setAdopted:function(){},clearAdopted:function(){},setError:function(){},clearError:function(){},randomPet:function(){},cyclePets:function(){}}),m=f,E=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).state={currDog:{},currCat:{},queue:{first:{},requeue:function(){}},people:[],person:"",adopted:[],error:null},n.setCurrDog=function(e){n.setState({currDog:e})},n.clearCurrDog=function(){n.setState({currDog:{}})},n.setCurrCat=function(e){n.setState({currCat:e})},n.clearCurrCat=function(){n.setState({currCat:{}})},n.setQueue=function(e){n.setState({queue:e})},n.clearQueue=function(){n.setState({first:{},requeue:function(){}})},n.setPeople=function(e){n.setState({people:e})},n.clearPeople=function(){n.setState({users:[]})},n.setPerson=function(e){n.setState({person:e})},n.clearPerson=function(){n.setState({person:""})},n.setAdopted=function(e){n.setState({adopted:[].concat(Object(s.a)(n.state.adopted),[e])})},n.clearAdopted=function(){n.setState({adopted:[]})},n.setError=function(e){console.log(e),n.setState({error:e})},n.clearError=function(){n.setState({error:null})},n.randomPet=function(){Math.floor(100*Math.random())<50?n.handleAdoptDog():n.handleAdoptCat()},n.cyclePets=function(){n.context.person!==n.context.queue.first.value&&setTimeout((function(){this.randomPet()}),5e3)},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e={currDog:this.state.currDog,currCat:this.state.currCat,queue:this.state.queue,people:this.state.people,person:this.state.person,adopted:this.state.adopted,error:this.state.error,setCurrDog:this.setCurrDog,clearCurrDog:this.clearCurrDog,setCurrCat:this.setCurrCat,clearCurrCat:this.clearCurrCat,setQueue:this.setQueue,clearQueue:this.clearQueue,setPeople:this.setPeople,clearPeople:this.clearPeople,setPerson:this.setPerson,clearPerson:this.clearPerson,setAdopted:this.setAdopted,clearAdopted:this.clearAdopted,setError:this.setError,clearError:this.clearError,randomPet:this.randomPet,cyclePets:this.cyclePets};return a.a.createElement(f.Provider,{value:e},this.props.children)}}]),t}(r.Component),g=n(1),v={API_ENDPOINT:"http://localhost:8000"},C={getPeople:function(){return fetch("".concat(v.API_ENDPOINT,"/people"),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},addPerson:function(e){return fetch("".concat(v.API_ENDPOINT,"/people"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({person:e})}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}},y=(n(29),function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).handleJoinQueue=function(e){e.preventDefault(),n.context.clearError(),n.context.clearPerson();var t=document.getElementById("name").value;return n.context.setPerson(t),C.addPerson(t).then((function(e){var t=n.props,r=t.location,a=t.history,o=(r.state||{}).from||"/adopt";a.push(o)}))},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("div",{className:"intro"},a.a.createElement("h2",{className:"adopt"},"Adopt Pure Love"),a.a.createElement("h3",null,"Let's find you a new best friend!"),a.a.createElement("img",{src:"https://static.toiimg.com/photo/msid-74508525/74508525.jpg",alt:"two-goldens"})),a.a.createElement("div",null,a.a.createElement("h3",{className:"process"},"Here is how our process works..."),a.a.createElement("section",{className:"details"},a.a.createElement("p",null,"These cuddle buddies are in high demand, so customers will need to enter their name below and click 'Join Queue!'. There, you will wait your turn for the next dog or cat up for adoption. Congratulations on taking the first step to finding a new best friend!"),a.a.createElement("p",null,"If you are not ready yet, that is purrfectly fine! Just click 'Preview Adoptions' to see how the process works!"))),a.a.createElement("section",{className:"adopt-about"},a.a.createElement("h3",{className:"get-started"},"Preview our Pets"),a.a.createElement(u.b,{to:"/adopt"},a.a.createElement("button",null,"Preview Adoptions")," ")),a.a.createElement("form",{onSubmit:this.handleJoinQueue},a.a.createElement("h3",{className:"ready"},"Are your ready to adopt your new friend? Enter your name below to add yourself to the queue of future pet owners!"),a.a.createElement("input",{"aria-label":"name",type:"text",name:"name",id:"name",placeholder:"Enter Name",required:!0}),a.a.createElement("button",{type:"submit"},"Join Queue!")))}}]),t}(r.Component));y.contextType=m;var j=y,P=(n(35),function(e){function t(){return Object(i.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.pet,n=e.handleAdoptClick,r=!1;return this.context.queue&&(r=this.context.person===this.context.queue.first.value),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,a.a.createElement("h3",{className:"pet-info"},t.name),a.a.createElement("img",{src:t.imageURL,alt:t.description}),a.a.createElement("h3",{className:"pet-info"},t.name),a.a.createElement("p",{className:"story"},t.story),a.a.createElement("h3",{className:"pet-info"},"Breed: ",t.breed),a.a.createElement("h3",{className:"pet-info"},"Gender: ",t.gender),a.a.createElement("h3",{className:"pet-info"},"Age: ",t.age)),a.a.createElement("button",{type:"button",onClick:n,disabled:!r},"Adopt Me!"),a.a.createElement("hr",null))}}]),t}(r.Component));P.contextType=m;n(36);var b=function(e){function t(){return Object(i.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"line-center"},a.a.createElement("ul",{className:"adopt-list"},a.a.createElement("h2",{className:"line-header"},"Adoption Line"),a.a.createElement("li",null,this.props.first),a.a.createElement("li",null,this.props.second),a.a.createElement("li",null,this.props.third)))}}]),t}(r.Component),x={getDog:function(){return fetch("".concat(v.API_ENDPOINT,"/dogs"),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},deleteDog:function(){return fetch("".concat(v.API_ENDPOINT,"/dogs"),{method:"DELETE",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}},O={getCat:function(){return fetch("".concat(v.API_ENDPOINT,"/cats"),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},deleteCat:function(){return fetch("".concat(v.API_ENDPOINT,"/cats"),{method:"DELETE",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}},N=function e(t){Object(i.a)(this,e),this.value=t,this.next=null},D=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(i.a)(this,e),this.first=t,this.last=n}return Object(l.a)(e,[{key:"enqueue",value:function(e){var t=new N(e);null===this.first&&(this.first=t),this.last&&(this.last.next=t),this.last=t}},{key:"dequeue",value:function(){if(null!==this.first){var e=this.first;return this.first=this.first.next,e===this.last&&(this.last=null),e.value}}},{key:"requeue",value:function(){if(null!==this.first){var e=this.dequeue();return this.enqueue(e),e}}}]),e}(),k=(n(37),function(e){function t(){return Object(i.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.imgSrc,n=e.name,r=e.owner;return a.a.createElement("div",null,a.a.createElement("img",{src:t,alt:"pet"}),a.a.createElement("p",null,"Name: ",n),a.a.createElement("p",null,"New Bestie: ",r))}}]),t}(r.Component)),A=(n(38),function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).cyclePeople=function(){n.context.person!==n.context.queue.first.value&&(Math.floor(100*Math.random())<50?n.handleDogClick():n.handleCatClick())},n.handleDogClick=function(){return x.deleteDog().then((function(e){var t=n.context.queue.requeue();e.owner=t,n.context.setAdopted(e)})).then((function(e){x.getDog().then((function(e){return n.context.setCurrDog(e)})),n.setState({nowAdopting:n.context.queue.first.value})}))},n.handleCatClick=function(){return O.deleteCat().then((function(e){var t=n.context.queue.requeue();e.owner=t,n.context.setAdopted(e)})).then((function(e){O.getCat().then((function(e){return n.context.setCurrCat(e)})),n.setState({nowAdopting:n.context.queue.first.value})}))},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.context.clearCurrDog(),this.context.clearCurrCat(),this.context.clearError(),this.context.clearQueue(),this.interval=setInterval(this.cyclePeople.bind(this),1500),Promise.all([O.getCat(),x.getDog(),C.getPeople()]).then((function(t){e.context.setCurrDog(t[0]),e.context.setCurrCat(t[0]);var n=new D;t[2].forEach((function(e){return n.enqueue(e)})),e.context.setQueue(n)})).catch((function(e){return console.error(e)}))}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"renderQueue",value:function(){return a.a.createElement(b,{first:this.context.queue.first.value,second:this.context.queue.first.next.value,third:this.context.queue.first.next.next.value})}},{key:"renderDog",value:function(){return a.a.createElement(P,{pet:this.context.currDog,petType:"dog",handleAdoptClick:this.handleDogClick})}},{key:"renderCat",value:function(){return a.a.createElement(P,{pet:this.context.currCat,petType:"cat",handleAdoptClick:this.handleCatClick})}},{key:"render",value:function(){var e=this.context.adopted.map((function(e,t){return a.a.createElement("div",{className:"congrats",key:t},a.a.createElement(k,{imgSrc:e.imageURL,name:e.name,owner:e.owner}))}));return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"adopt-header"},a.a.createElement("h1",null,"Choose Your Next Best Friend!")),a.a.createElement("div",{className:"center"},a.a.createElement("div",null,a.a.createElement("h2",{className:"next-pet"},"Puppies"),this.renderDog()),a.a.createElement("div",null,a.a.createElement("h2",{className:"next-pet"},"Kitties"),this.renderCat())),this.context.queue.first.next?this.renderQueue():"Loading...",a.a.createElement("div",null,a.a.createElement("hr",null),a.a.createElement("h2",{className:"congrats"},"Congrats on Your New Bestie!"),e))}}]),t}(r.Component));A.contextType=m;var w=A,q=(n(39),function(e){function t(){return Object(i.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"App"},a.a.createElement("main",{role:"main",className:"App-main"},a.a.createElement(u.b,{to:"/"},a.a.createElement("h1",{className:"logo"},"Petful")),a.a.createElement(g.c,null,a.a.createElement(g.a,{exact:!0,path:"/",component:j}),a.a.createElement(g.a,{path:"/adopt",component:w}))))}}]),t}(r.Component));c.a.render(a.a.createElement(u.a,null,a.a.createElement(E,null,a.a.createElement(q,null))),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.2d4ba746.chunk.js.map